(this.webpackJsonptetradka_site=this.webpackJsonptetradka_site||[]).push([[0],{23:function(t,e,o){},26:function(t,e,o){},27:function(t,e,o){},29:function(t,e,o){},30:function(t,e,o){"use strict";o.r(e);var n=o(1),c=o.n(n),a=o(12),i=o.n(a),s=(o(23),o(13)),r=o(5),l=o(14),u=o(15),d=o(18),b=o(17),j=o(7),k=o.n(j),m=(o(9),o(0)),h=function(t){return Object(m.jsxs)("div",{className:"book",onClick:function(){t.setActive(!0),t.onClick()},children:[Object(m.jsx)("h1",{className:"book_name",children:t.title||""}),Object(m.jsx)("div",{className:"book_delete",onClick:function(e){t.delete(),e.stopPropagation()},children:Object(m.jsx)("span",{className:"material-icons",children:"clear"})})]})},v=(o(26),o(8)),f=o(4),p=(o(27),o(16)),O=o.n(p),x=function(t){var e=t.photo,o=t.setPhoto,n=c.a.useState(e),a=Object(f.a)(n,2),i=a[0],s=a[1];return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(O.a,{multiple:!0,value:i,onChange:function(t){s(t),o(t)},maxNumber:69,dataURLKey:"data_url",children:function(t){t.imageList;var e=t.onImageUpload,o=t.onImageRemoveAll,n=(t.onImageUpdate,t.onImageRemove,t.isDragging),c=t.dragProps;return Object(m.jsxs)("div",{className:"upload__image-wrapper",children:[Object(m.jsx)("button",Object(v.a)(Object(v.a)({style:n?{color:"red"}:null,onClick:e},c),{},{children:"Click or Drop here"})),"\xa0",Object(m.jsx)("button",{onClick:o,children:"Remove all images"})]})}})})},g=function(t){var e,o=t.active,n=t.setActive,c=t.activebook,a=t.setActivePhoto;return Object(m.jsx)("div",{className:o?"modal_book active":"modal_book",onClick:function(){n(!1)},children:Object(m.jsxs)("div",{className:"book_content",onClick:function(t){return t.stopPropagation()},children:[Object(m.jsx)("h2",{className:"book_name",children:c.title}),Object(m.jsxs)("div",{className:"book_photos",children:[Object(m.jsx)(x,{photo:c.photo,setPhoto:function(t){return a(t)}}),null!==c&&void 0!==c&&null!==(e=c.photo)&&void 0!==e&&e.length?c.photo.map((function(t,e){return Object(m.jsx)("img",{src:t},e)})):Object(m.jsx)(m.Fragment,{})]})]})})},N=(o(29),function(t){var e=t.active,o=t.setActive,n=t.addBook,a=c.a.useState(""),i=Object(f.a)(a,2),s=i[0],r=i[1];return Object(m.jsx)("div",{className:e?"modal active":"modal",onClick:function(){o(!1)},children:Object(m.jsxs)("div",{className:"modal-content",onClick:function(t){return t.stopPropagation()},children:[Object(m.jsx)("h3",{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438"}),Object(m.jsxs)("div",{className:"modal-body",children:[Object(m.jsx)("input",{className:"modal-input",type:"text",value:s,onChange:function(t){return r(t.target.value)},placeholder:"\u0421\u044e\u0434\u0430"}),Object(m.jsx)("input",{className:"modal-btn",type:"button",onClick:function(){n(s),r(""),o(!1)},value:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"})]})]})})}),S=function(t){Object(d.a)(o,t);var e=Object(b.a)(o);function o(t){var n;return Object(l.a)(this,o),(n=e.call(this,t)).addBook=function(t){n.setState((function(e){return{books:[].concat(Object(r.a)(e.books),[{id:Date.now(),title:t,photo:[]}])}}),(function(){return localStorage.setItem("books",JSON.stringify(n.state.books))}))},n.delete=function(t){n.setState((function(e){return{books:e.books.filter((function(e){return e.id!=t}))}}),(function(){return localStorage.setItem("books",JSON.stringify(n.state.books))}))},n.setActivePhoto=function(t){n.setState((function(e){return console.log(t),{activebook:{id:e.activebook.id,title:e.activebook.title,photo:[].concat(Object(r.a)(e.activebook.photo),Object(r.a)(t.map((function(t){return t.data_url}))))}}}),(function(){n.setState((function(t){return{books:t.books.map((function(e){return e.id===t.activebook.id?t.activebook:e}))}}),(function(){return localStorage.setItem("books",JSON.stringify(n.state.books))}))}))},n.state={bookname:"",modal:!1,books:[],activebook:{}},n}return Object(u.a)(o,[{key:"componentDidMount",value:function(){var t=Object(s.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,JSON.parse(localStorage.getItem("books"));case 2:(e=t.sent)&&this.setState({books:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)("header",{children:Object(m.jsx)("h2",{children:"Tetradka"})}),Object(m.jsx)("section",{className:"main",children:Object(m.jsxs)("div",{className:"books_content",children:[this.state.books.map((function(e,o){return Object(m.jsx)(h,{bookId:e.id,title:e.title,setActive:function(e){return t.setState({modalbook:e})},onClick:function(){return t.setState({activebook:e},(function(){return console.log(t.state.activebook)}))},delete:function(){return t.delete(e.id)}},o)})),Object(m.jsx)("div",{className:"book_add",onClick:function(){return t.setState({modal:!0,bookname:t.title})},children:Object(m.jsx)("h2",{children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443 "})})]})}),Object(m.jsx)(g,{activebook:this.state.activebook,active:this.state.modalbook,setActive:function(e){return t.setState({modalbook:e})},setActivePhoto:function(e){return t.setActivePhoto(e)}}),Object(m.jsx)(N,{active:this.state.modal,setActive:function(e){return t.setState({modal:e})},addBook:this.addBook})]})}}]),o}(c.a.Component),C=S;i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(C,{})}),document.getElementById("root"))},9:function(t,e,o){}},[[30,1,2]]]);
//# sourceMappingURL=main.8bb8450b.chunk.js.map